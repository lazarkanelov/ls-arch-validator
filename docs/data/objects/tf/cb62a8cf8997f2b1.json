{
  "main_tf": "# AWS VPC 3-Tier Architecture\n\nresource \"aws_vpc\" \"main\" {\n  cidr_block           = \"10.0.0.0/16\"\n  enable_dns_hostnames = true\n  enable_dns_support   = true\n\n  tags = {\n    Name        = \"three-tier-vpc\"\n    Environment = var.environment\n  }\n}\n\nresource \"aws_subnet\" \"public\" {\n  count                   = 2\n  vpc_id                  = aws_vpc.main.id\n  cidr_block              = cidrsubnet(aws_vpc.main.cidr_block, 8, count.index)\n  availability_zone       = data.aws_availability_zones.available.names[count.index]\n  map_public_ip_on_launch = true\n\n  tags = {\n    Name = \"public-subnet-${count.index + 1}\"\n    Tier = \"public\"\n  }\n}\n\nresource \"aws_subnet\" \"private\" {\n  count             = 2\n  vpc_id            = aws_vpc.main.id\n  cidr_block        = cidrsubnet(aws_vpc.main.cidr_block, 8, count.index + 10)\n  availability_zone = data.aws_availability_zones.available.names[count.index]\n\n  tags = {\n    Name = \"private-subnet-${count.index + 1}\"\n    Tier = \"private\"\n  }\n}\n\nresource \"aws_db_subnet_group\" \"main\" {\n  name       = \"main-db-subnet-group\"\n  subnet_ids = aws_subnet.private[*].id\n\n  tags = {\n    Name = \"Main DB Subnet Group\"\n  }\n}\n\nresource \"aws_db_instance\" \"main\" {\n  identifier           = \"app-database\"\n  allocated_storage    = 20\n  storage_type         = \"gp2\"\n  engine               = \"mysql\"\n  engine_version       = \"8.0\"\n  instance_class       = \"db.t3.micro\"\n  db_name              = \"appdb\"\n  username             = var.db_username\n  password             = var.db_password\n  parameter_group_name = \"default.mysql8.0\"\n  skip_final_snapshot  = true\n  db_subnet_group_name = aws_db_subnet_group.main.name\n  vpc_security_group_ids = [aws_security_group.db.id]\n\n  tags = {\n    Name        = \"Application Database\"\n    Environment = var.environment\n  }\n}\n",
  "variables_tf": "variable \"environment\" {\n  type        = string\n  description = \"Deployment environment (dev, staging, prod)\"\n  default     = \"dev\"\n}\n\nvariable \"db_username\" {\n  type        = string\n  description = \"Database administrator username\"\n  sensitive   = true\n}\n\nvariable \"db_password\" {\n  type        = string\n  description = \"Database administrator password\"\n  sensitive   = true\n}\n\nvariable \"allowed_cidr_blocks\" {\n  type        = list(string)\n  description = \"CIDR blocks allowed to access the application\"\n  default     = [\"0.0.0.0/0\"]\n}\n",
  "outputs_tf": "output \"vpc_id\" {\n  value       = aws_vpc.main.id\n  description = \"The ID of the VPC\"\n}\n\noutput \"public_subnet_ids\" {\n  value       = aws_subnet.public[*].id\n  description = \"List of public subnet IDs\"\n}\n\noutput \"private_subnet_ids\" {\n  value       = aws_subnet.private[*].id\n  description = \"List of private subnet IDs\"\n}\n\noutput \"database_endpoint\" {\n  value       = aws_db_instance.main.endpoint\n  description = \"RDS instance endpoint\"\n}\n"
}